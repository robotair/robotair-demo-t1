# This Rigelfile file was automatically generated by Robotair.
# Feel free to alter it according to your needs.

# For more information on Rigel and Rigelfiles visit:
# https://github.com/rigel-ros/rigel
---

vars:
    distro: "galactic"

application:
    distro: "{{ vars.distro }}"

providers:

    container_registry_provider_1:
        provider: "rigel.providers.core.ContainerRegistryProvider"
        with:
            server: "https://ghcr.io/v2/"
            username: "t1"
            password: "{{ vars.REGISTRY_PASSWORD }}"

jobs:

    dockerfile:
        plugin: "rigel.plugins.core.DockerfilePlugin"
        with:
            ros_image: "docker.io/library/ros:galactic-ros-base"
            command: "ros2 run robotair_pub robotair_pub_node"
            compiler:
                name: "colcon"
            username: "robotair"

    build:
        plugin: "rigel.plugins.core.BuildXPlugin"
        with:
            image: "ghcr.io/robotair/trainee-t1"
            tags:
                - "latest"
            load: False
            push: True



sequences:

    robotair:
        stages:
            -
                jobs:
                    - "dockerfile"
                    - "build"